/* EXERCÍCIOS CAP 18 V.78 */ 

CREATE DATABASE PROJETO;
USE PROJETO;

/* A38 MODELO FISICO */
CREATE DATABASE OFICINA;
USE OFICINA;

CREATE TABLE CLIENTE (
	IDCLIENTE INT PRIMARY KEY AUTO_INCREMENT,
	NOME VARCHAR (30) NOT NULL,
	SEXO ENUM ('M', 'F') NOT NULL,
	ID_CARRO INT UNIQUE
);

CREATE TABLE TELEFONE (
	IDTELEFONE INT PRIMARY KEY AUTO_INCREMENT,
	TIPO  ENUM ('RES', 'COM', 'CEL') NOT NULL,
	NUMERO VARCHAR (30) NOT NULL,
	ID_CLIENTE INT
);

CREATE TABLE MARCA (
	IDMARCA INT PRIMARY KEY AUTO_INCREMENT,
	MARCA VARCHAR (30) UNIQUE
);

CREATE TABLE CARRO (
	IDCARRO INT PRIMARY KEY AUTO_INCREMENT,
	MODELO VARCHAR (30) NOT NULL,
	PLACA VARCHAR (30) NOT NULL UNIQUE,
	ID_MARCA INT
);

CREATE TABLE COR (
	IDCOR INT PRIMARY KEY AUTO_INCREMENT,
	COR VARCHAR (30) UNIQUE
);

CREATE TABLE CARRO_COR (
	ID_CARRO INT,
	ID_COR INT,
	PRIMARY KEY (ID_CARRO, ID_COR)
);

/* ********************* */
CREATE TABLE ENDERECO (
	IDENDERECO INT PRIMARY KEY AUTO_INCREMENT,
	RUA VARCHAR (30) NOT NULL,
	BAIRRO VARCHAR (30) NOT NULL,
	CIDADE VARCHAR (30) NOT NULL,
	ESTADO CHAR (2) NOT NULL
);

/* ********************* */

/* CONSTRAINTS */

ALTER TABLE TELEFONE
ADD CONSTRAINT FK_TELEFONE_CLIENTE
FOREIGN KEY (ID_CLIENTE)
REFERENCES CLIENTE (IDCLIENTE);

ALTER TABLE CLIENTE
ADD CONSTRAINT FK_CLIENTE_CARRO
FOREIGN KEY (ID_CARRO)
REFERENCES CARRO (IDCARRO);

ALTER TABLE CARRO
ADD CONSTRAINT FK_CARRO_MARCA
FOREIGN KEY (ID_MARCA)
REFERENCES MARCA (IDMARCA);

ALTER TABLE CARRO_COR
ADD CONSTRAINT FK_COR
FOREIGN KEY (ID_COR)
REFERENCES COR (IDCOR);

ALTER TABLE CARRO_COR
ADD CONSTRAINT FK_CARRRO
FOREIGN KEY (ID_CARRO)
REFERENCES CARRO (IDCARRO);


/* PREENCHER O BANCO COM NO MÍNIMO 10 CLIENTES */

INSERT INTO CARRO VALUES (NULL, 'COROLLA', 'MPA3254', NULL);
INSERT INTO CARRO VALUES (NULL, 'VOYAGE', 'MPR2542', NULL);
INSERT INTO CARRO VALUES (NULL, 'UNO', 'MSA5334', NULL);

INSERT INTO COR VALUES (NULL, 'BRANCO');
INSERT INTO COR VALUES (NULL, 'PRETO');
INSERT INTO COR VALUES (NULL, 'VERMELHO');

INSERT INTO CLIENTE VALUES (NULL, 'JOAO', 'M', 4);
INSERT INTO CLIENTE VALUES (NULL, 'SARA', 'F', 5);
INSERT INTO CLIENTE VALUES (NULL, 'BIANCA', 'F', 6);

INSERT INTO TELEFONE VALUES (NULL, 'RES', '89998585', 2);
INSERT INTO TELEFONE VALUES (NULL, 'CEL', '99995555', 2);
INSERT INTO TELEFONE VALUES (NULL, 'RES', '35258585', 3);
INSERT INTO TELEFONE VALUES (NULL, 'RES', '88889585', 4);

INSERT INTO MARCA (NULL, 'TOYOTA');
INSERT INTO MARCA (NULL, 'VOLKSWAGEN');
INSERT INTO MARCA (NULL, 'FIAT');


/* INSERT INTO ENDERECO VALUES (NULL, 'RUA ANTONIO BARBOSA', 'CENTRO', 'B. HORIZONTE', 'MG', 1); */
